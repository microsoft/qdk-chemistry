

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interface system &mdash; qdk-chemistry 1.0.0-rc1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=4c969af8" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=a64bac2b" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=81bd8d55"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/tabs.js?v=3ee01567"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Settings" href="settings.html" />
    <link rel="prev" title="Factory pattern" href="factory_pattern.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            qdk-chemistry
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">In-depth user guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Design principles of QDK/Chemistry</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#separation-of-data-and-algorithms">Separation of data and algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#factory-pattern">Factory pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#settings-pattern">Settings pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#data-flow-example">Data flow example</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#interface-architecture-plugins">Interface architecture (plugins)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#further-reading">Further reading</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="factory_pattern.html">Factory pattern</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Interface system</a></li>
<li class="toctree-l4"><a class="reference internal" href="settings.html">Settings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">Data management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/index.html">Available algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basis_functionals.html">Functionals and basis sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model_hamiltonians.html">Model Hamiltonians</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html">Plugins</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/python_api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/cpp_api.html">C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Acronym definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">qdk-chemistry</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">In-depth user guide</a></li>
          <li class="breadcrumb-item"><a href="index.html">Design principles of QDK/Chemistry</a></li>
      <li class="breadcrumb-item active">Interface system</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/user/comprehensive/design/interfaces.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="interface-system">
<h1>Interface system<a class="headerlink" href="#interface-system" title="Link to this heading"></a></h1>
<p>This document describes QDK/Chemistry’s interface system, which provides unified access to various quantum chemistry packages.
This design allows researchers to leverage the unique strengths of various quantum chemistry programs while maintaining a consistent workflow.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>QDK/Chemistry is designed with an extensible plugin architecture that allows algorithms to be implemented either natively within QDK/Chemistry or as interfaces to established third-party quantum chemistry packages.
This approach combines the benefits of a consistent API with the specialized capabilities of different software packages, following QDK/Chemistry’s core <a class="reference internal" href="index.html"><span class="doc">design principles</span></a> of extensibility and interoperability.</p>
<p>The interface system implements the <a class="reference internal" href="factory_pattern.html"><span class="doc">factory pattern</span></a>, which allows algorithms to be instantiated by name without the user needing to know the specific implementation details.
This abstraction enables seamless switching between different backends without changing your code, making it easier to benchmark and compare different approaches.</p>
</section>
<section id="interface-architecture">
<h2>Interface architecture<a class="headerlink" href="#interface-architecture" title="Link to this heading"></a></h2>
<p>The interface system is built on the following principles:</p>
<ol class="arabic simple">
<li><p><strong>Unified API</strong>: All implementations of an algorithm share the same interface, regardless of the underlying
implementation</p></li>
<li><p><strong>Runtime Selection</strong>: Users can select implementations at runtime without changing their code</p></li>
<li><p><strong>Transparent Delegation</strong>: QDK/Chemistry handles all data format conversions between the QDK/Chemistry data model and external
packages</p></li>
<li><p><strong>Consistent Configuration</strong>: All implementations are configured through the same <a class="reference internal" href="settings.html"><span class="doc">Settings</span></a> interface</p></li>
</ol>
<div class="graphviz"><img src="../../../_images/graphviz-e91d4ade25c46a8ac1e1ed8a7718f491d3ddbfa2.png" alt="digraph InterfaceArchitecture {
    rankdir=TB;
    bgcolor=&quot;#FAFAFA&quot;;
    node [shape=box, style=&quot;rounded,filled&quot;, fontname=&quot;Arial&quot;, margin=0.3];
    edge [color=&quot;#1976D2&quot;, penwidth=2];

    UserCode [label=&quot;User Code&quot;, fillcolor=&quot;#E8EAF6&quot;, color=&quot;#5C6BC0&quot;, penwidth=2, fontcolor=&quot;#3949AB&quot;];
    API [label=&quot;QDK/Chemistry Algorithm API&quot;, fillcolor=&quot;#E3F2FD&quot;, color=&quot;#42A5F5&quot;, penwidth=2, fontcolor=&quot;#1976D2&quot;];
    Native [label=&quot;Native Implementation&quot;, fillcolor=&quot;#E0F2F1&quot;, color=&quot;#26A69A&quot;, penwidth=2, fontcolor=&quot;#00796B&quot;];
    ThirdParty [label=&quot;Third-Party Interface&quot;, fillcolor=&quot;#E0F2F1&quot;, color=&quot;#26A69A&quot;, penwidth=2, fontcolor=&quot;#00796B&quot;];
    External [label=&quot;External Package&quot;, fillcolor=&quot;#F3E5F5&quot;, color=&quot;#AB47BC&quot;, penwidth=2, fontcolor=&quot;#7B1FA2&quot;];

    UserCode -&gt; API;
    API -&gt; Native;
    API -&gt; ThirdParty;
    ThirdParty -&gt; External;
}" class="graphviz" /></div>
</section>
<section id="supported-interfaces">
<h2>Supported interfaces<a class="headerlink" href="#supported-interfaces" title="Link to this heading"></a></h2>
<p>QDK/Chemistry provides interfaces to other popular quantum chemistry packages, each carefully integrated to preserve their strengths while presenting a unified API to the user.
These include:</p>
<ul class="simple">
<li><p><strong>PySCF</strong>: Python-based Simulations of Chemistry Framework</p></li>
</ul>
<p>Each interface is implemented as a derived class that inherits from the appropriate algorithm base class (e.g.,
<a class="reference internal" href="../algorithms/scf_solver.html"><span class="doc">ScfSolver</span></a>, <a class="reference internal" href="../algorithms/localizer.html"><span class="doc">Localizer</span></a>), ensuring type safety and consistent behavior across implementations.</p>
</section>
<section id="using-interfaces">
<h2>Using interfaces<a class="headerlink" href="#using-interfaces" title="Link to this heading"></a></h2>
<p>Interfaces are accessed through the standard algorithm factory pattern, which provides a consistent way to instantiate
any algorithm regardless of its implementation.
This pattern is implemented across all major algorithm types in QDK/Chemistry.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">C++ API</label><div class="tab-content docutils container">
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;qdk/chemistry.hpp&gt;</span>

<span class="c1">// Create an SCF solver that uses the QDK/Chemistry library as solver</span>
<span class="k">auto</span><span class="w"> </span><span class="n">scf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ScfSolverFactory</span><span class="o">::</span><span class="n">create</span><span class="p">();</span>

<span class="c1">// Configure it using the standard settings interface</span>
<span class="n">scf</span><span class="o">-&gt;</span><span class="n">settings</span><span class="p">().</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;basis_set&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cc-pvdz&quot;</span><span class="p">);</span>
<span class="n">scf</span><span class="o">-&gt;</span><span class="n">settings</span><span class="p">().</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;method&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hf&quot;</span><span class="p">);</span>

<span class="c1">// Run calculation with the same API as native implementations</span>
<span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="n">energy</span><span class="p">,</span><span class="w"> </span><span class="n">orbitals</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scf</span><span class="o">-&gt;</span><span class="n">solve</span><span class="p">(</span><span class="n">structure</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">Python API</label><div class="tab-content docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">qdk_chemistry.algorithms</span><span class="w"> </span><span class="kn">import</span> <span class="n">available</span><span class="p">,</span> <span class="n">create</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qdk_chemistry.data</span><span class="w"> </span><span class="kn">import</span> <span class="n">Structure</span>

<span class="n">coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">]])</span>
<span class="n">structure</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="s2">&quot;H&quot;</span><span class="p">])</span>

<span class="c1"># Create an SCF solver using the factory</span>
<span class="n">scf_solver</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="s2">&quot;scf_solver&quot;</span><span class="p">,</span> <span class="s2">&quot;pyscf&quot;</span><span class="p">)</span>

<span class="c1"># Configure it using the standard settings interface</span>
<span class="n">scf_solver</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;basis_set&quot;</span><span class="p">,</span> <span class="s2">&quot;cc-pvdz&quot;</span><span class="p">)</span>
<span class="n">scf_solver</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">,</span> <span class="s2">&quot;hf&quot;</span><span class="p">)</span>

<span class="c1"># Run calculation - returns (energy, wavefunction)</span>
<span class="n">energy</span><span class="p">,</span> <span class="n">wavefunction</span> <span class="o">=</span> <span class="n">scf_solver</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">structure</span><span class="p">,</span> <span class="n">charge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">spin_multiplicity</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">orbitals</span> <span class="o">=</span> <span class="n">wavefunction</span><span class="o">.</span><span class="n">get_orbitals</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SCF Energy: </span><span class="si">{</span><span class="n">energy</span><span class="si">:</span><span class="s2">.10f</span><span class="si">}</span><span class="s2"> Hartree&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="listing-available-implementations">
<h2>Listing available implementations<a class="headerlink" href="#listing-available-implementations" title="Link to this heading"></a></h2>
<p>You can discover what implementations are available for each algorithm type:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">C++ API</label><div class="tab-content docutils container">
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;qdk/chemistry.hpp&gt;</span>

<span class="c1">// Get a list of available SCF solver implementations</span>
<span class="k">auto</span><span class="w"> </span><span class="n">available_solvers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ScfSolverFactory</span><span class="o">::</span><span class="n">available</span><span class="p">();</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">solver</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">available_solvers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">solver</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Get documentation for a specific implementation</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">ScfSolverFactory</span><span class="o">::</span><span class="n">get_docstring</span><span class="p">(</span><span class="s">&quot;default&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Python API</label><div class="tab-content docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># List available implementations for each algorithm type</span>
<span class="k">for</span> <span class="n">algorithm_name</span> <span class="ow">in</span> <span class="n">available</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2"> has methods:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">method_name</span> <span class="ow">in</span> <span class="n">available</span><span class="p">(</span><span class="n">algorithm_name</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">method_name</span><span class="si">}</span><span class="s2"> has settings:&quot;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="n">algorithm_name</span><span class="p">,</span> <span class="n">method_name</span><span class="p">)</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="adding-new-interfaces">
<h2>Adding new interfaces<a class="headerlink" href="#adding-new-interfaces" title="Link to this heading"></a></h2>
<p>QDK/Chemistry’s plugin architecture makes it straightforward to add interfaces to new packages.
This extensibility is a core design principle of QDK/Chemistry, allowing the community to expand the toolkit’s capabilities.</p>
<p>To create a new interface:</p>
<ol class="arabic simple">
<li><p>Create a new implementation class that inherits from the algorithm’s base class (e.g., <code class="docutils literal notranslate"><span class="pre">ScfSolver</span></code>, <code class="docutils literal notranslate"><span class="pre">Localizer</span></code>)</p></li>
<li><p>Register the implementation with the algorithm’s factory using the registration methods</p></li>
<li><p>Implement the required methods, translating between QDK/Chemistry data structures and the external package’s format</p></li>
</ol>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">C++ API</label><div class="tab-content docutils container">
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;qdk/chemistry.hpp&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;custom_chemistry_package.hpp&quot;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">qdk</span><span class="o">::</span><span class="nn">chemistry</span><span class="w"> </span><span class="p">{</span>
<span class="k">namespace</span><span class="w"> </span><span class="nn">algorithms</span><span class="w"> </span><span class="p">{</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomScfSolver</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">ScfSolver</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="n">CustomScfSolver</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">::</span><span class="n">Orbitals</span><span class="o">&gt;</span><span class="w"> </span><span class="n">solve</span><span class="p">(</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="n">data</span><span class="o">::</span><span class="n">Structure</span><span class="o">&amp;</span><span class="w"> </span><span class="n">structure</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="c1">// Convert QDK/Chemistry structure to custom package format</span>
<span class="w">   </span><span class="k">auto</span><span class="w"> </span><span class="n">custom_mol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">convert_to_custom_format</span><span class="p">(</span><span class="n">structure</span><span class="p">);</span>

<span class="w">   </span><span class="c1">// Run calculation with custom package</span>
<span class="w">   </span><span class="k">auto</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">custom_chemistry</span><span class="o">::</span><span class="n">run_scf</span><span class="p">(</span>
<span class="w">      </span><span class="n">custom_mol</span><span class="p">,</span><span class="w"> </span><span class="n">settings</span><span class="p">().</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;basis_set&quot;</span><span class="p">),</span>
<span class="w">      </span><span class="n">settings</span><span class="p">().</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;method&quot;</span><span class="p">));</span>

<span class="w">   </span><span class="c1">// Convert results back to QDK/Chemistry format</span>
<span class="w">   </span><span class="kt">double</span><span class="w"> </span><span class="n">energy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">energy</span><span class="p">;</span>
<span class="w">   </span><span class="n">data</span><span class="o">::</span><span class="n">Orbitals</span><span class="w"> </span><span class="n">orbitals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">convert_from_custom_format</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">orbitals</span><span class="p">);</span>

<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">energy</span><span class="p">,</span><span class="w"> </span><span class="n">orbitals</span><span class="p">};</span>
<span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
<span class="n">custom_chemistry</span><span class="o">::</span><span class="n">Molecule</span><span class="w"> </span><span class="n">convert_to_custom_format</span><span class="p">(</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="n">data</span><span class="o">::</span><span class="n">Structure</span><span class="o">&amp;</span><span class="w"> </span><span class="n">structure</span><span class="p">);</span>
<span class="n">data</span><span class="o">::</span><span class="n">Orbitals</span><span class="w"> </span><span class="nf">convert_from_custom_format</span><span class="p">(</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="n">custom_chemistry</span><span class="o">::</span><span class="n">Orbitals</span><span class="o">&amp;</span><span class="w"> </span><span class="n">orbitals</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// Register in a static initializer block</span>
<span class="k">namespace</span><span class="w"> </span><span class="p">{</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">registered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ScfSolverFactory</span><span class="o">::</span><span class="n">register_implementation</span><span class="p">(</span>
<span class="w">   </span><span class="s">&quot;custom&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[]()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">CustomScfSolver</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="p">},</span>
<span class="w">   </span><span class="s">&quot;Interface to Custom Chemistry Package&quot;</span><span class="p">);</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// anonymous namespace</span>

<span class="p">}</span><span class="w">  </span><span class="c1">// namespace algorithms</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// namespace qdk::chemistry</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">Python API</label><div class="tab-content docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qdk_chemistry.algorithms</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_scf_solver</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">custom_chemistry_package</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ccp</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomScfSolver</span><span class="p">(</span><span class="n">ScfSolver</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">structure</span><span class="p">):</span>
        <span class="c1"># Convert QDK/Chemistry structure to custom package format</span>
        <span class="n">custom_mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_structure</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>

        <span class="c1"># Run calculation with custom package</span>
        <span class="n">custom_energy</span><span class="p">,</span> <span class="n">custom_orbs</span> <span class="o">=</span> <span class="n">ccp</span><span class="o">.</span><span class="n">run_scf</span><span class="p">(</span>
            <span class="n">custom_mol</span><span class="p">,</span>
            <span class="n">basis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;basis_set&quot;</span><span class="p">),</span>
            <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Convert results back to QDK/Chemistry format</span>
        <span class="n">energy</span> <span class="o">=</span> <span class="n">custom_energy</span>
        <span class="n">orbitals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_orbitals</span><span class="p">(</span><span class="n">custom_orbs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">energy</span><span class="p">,</span> <span class="n">orbitals</span>

<span class="c1"># Register the new solver with the factory</span>
<span class="n">register_scf_solver</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">,</span> <span class="n">CustomScfSolver</span><span class="p">,</span>
                   <span class="s2">&quot;Interface to Custom Chemistry Package&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>For developers interested in adding new interfaces, please refer to the <a class="reference internal" href="factory_pattern.html"><span class="doc">Factory pattern</span></a> documentation for more detailed guidance.</p>
</section>
<section id="interface-specific-settings">
<h2>Interface-specific settings<a class="headerlink" href="#interface-specific-settings" title="Link to this heading"></a></h2>
<p>While QDK/Chemistry provides a unified API for all implementations, each backend may support additional options specific to that package.
These package-specific settings are accessed through the same <a class="reference internal" href="settings.html"><span class="doc">Settings</span></a> interface but are typically prefixed with the package name to avoid namespace collisions.
This approach leverages the flexibility of QDK/Chemistry’s <a class="reference internal" href="settings.html"><span class="doc">settings system</span></a> to accommodate package-specific options while maintaining a consistent configuration experience.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">C++ API</label><div class="tab-content docutils container">
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Set general options that work across all backends</span>
<span class="n">scf</span><span class="o">-&gt;</span><span class="n">settings</span><span class="p">().</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;basis_set&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cc-pvdz&quot;</span><span class="p">);</span>
<span class="n">scf</span><span class="o">-&gt;</span><span class="n">settings</span><span class="p">().</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;max_iterations&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">Python API</label><div class="tab-content docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># All algorithms use a consistent settings interface</span>
<span class="n">scf</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="s2">&quot;scf_solver&quot;</span><span class="p">)</span>

<span class="c1"># Set general options that work across implementations</span>
<span class="n">scf</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;basis_set&quot;</span><span class="p">,</span> <span class="s2">&quot;sto-3g&quot;</span><span class="p">)</span>
<span class="n">scf</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;max_iterations&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">scf</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;tolerance&quot;</span><span class="p">,</span> <span class="mf">1.0e-8</span><span class="p">)</span>

<span class="c1"># Query available settings for an algorithm</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SCF settings: </span><span class="si">{</span><span class="n">scf</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Get a setting value</span>
<span class="n">max_iter</span> <span class="o">=</span> <span class="n">scf</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_iterations&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Max iterations: </span><span class="si">{</span><span class="n">max_iter</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Each interface implementation typically documents its specific settings, including both the common settings that are
translated to the backend and the backend-specific settings that are passed through directly.</p>
</section>
<section id="data-conversion">
<h2>Data conversion<a class="headerlink" href="#data-conversion" title="Link to this heading"></a></h2>
<p>QDK/Chemistry handles the conversion of data between its own format and third-party packages automatically.
This internal conversion process is transparent to the user, allowing you to work exclusively with QDK/Chemistry data structures regardless of which backend implementation is used.
This capability is built on QDK/Chemistry’s robust <a class="reference internal" href="../data/serialization.html"><span class="doc">serialization</span></a> system, which provides standardized methods for data conversion between different formats.</p>
<p>The data types that are automatically converted include:</p>
<dl class="simple">
<dt><a class="reference internal" href="../data/structure.html"><span class="doc">Molecular structures</span></a>:</dt><dd><p>Atoms, coordinates, charges, and multiplicity</p>
</dd>
<dt><a class="reference internal" href="../data/basis_set.html"><span class="doc">Basis sets</span></a>:</dt><dd><p>Basis set specifications, primitive and contracted functions</p>
</dd>
<dt><a class="reference internal" href="../data/orbitals.html"><span class="doc">Orbitals and wavefunctions</span></a>:</dt><dd><p>Coefficients, occupations, and energies</p>
</dd>
<dt><a class="reference internal" href="../data/hamiltonian.html"><span class="doc">Hamiltonians</span></a>:</dt><dd><p>One and two-electron integrals, core Hamiltonians</p>
</dd>
<dt>Calculation results (see <a class="reference internal" href="../../../api/api_autogen/qdk_chemistry.data.html#qdk_chemistry.data.Wavefunction" title="qdk_chemistry.data.Wavefunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wavefunction</span></code></a>):</dt><dd><p>Energies, gradients, properties</p>
</dd>
</dl>
<p>The conversion process is optimized to minimize data copying when possible, especially for large data structures like electron repulsion integrals (<a class="reference internal" href="../../../glossary.html#term-ERIs"><span class="xref std std-term">ERIs</span></a>).
When working with large systems, QDK/Chemistry may use direct algorithms or disk-based approaches to manage memory usage efficiently.</p>
</section>
<section id="performance-considerations">
<h2>Performance considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading"></a></h2>
<p>Using an interface to a third-party package may involve some overhead for data conversion.
However, this overhead is typically negligible compared to the computational cost of the quantum chemical calculations themselves, especially for larger systems and more computationally intensive methods.</p>
<p>QDK/Chemistry implements several optimizations to minimize this overhead:</p>
<ol class="arabic simple">
<li><p><strong>Lazy evaluation</strong>: Some data conversions are only performed when actually needed</p></li>
<li><p><strong>Caching</strong>: Converted data may be cached to avoid repeated conversions</p></li>
<li><p><strong>Direct interfaces</strong>: For some packages, QDK/Chemistry can use direct memory interfaces instead of file-based interfaces</p></li>
</ol>
<p>Different backend implementations may have different performance characteristics depending on the system size, method,
and hardware environment.</p>
</section>
<section id="available-interfaces-by-algorithm">
<h2>Available interfaces by algorithm<a class="headerlink" href="#available-interfaces-by-algorithm" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PySCF and other third-party interfaces may not be fully implemented for all algorithm classes mentioned.</p>
</div>
<p>The following table provides an overview of the available interfaces for each algorithm class in QDK/Chemistry.
Each algorithm class is implemented through the factory pattern, allowing you to select different implementations at runtime.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Algorithm class</p></th>
<th class="head"><p>QDK/Chemistry implementations</p></th>
<th class="head"><p>Third-party interfaces</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../../../api/api_autogen/qdk_chemistry.algorithms.html#qdk_chemistry.algorithms.ScfSolver" title="qdk_chemistry.algorithms.ScfSolver"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScfSolver</span></code></a></p></td>
<td><p>“qdk”</p></td>
<td><p>“pyscf”</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../api/api_autogen/qdk_chemistry.algorithms.html#qdk_chemistry.algorithms.OrbitalLocalizer" title="qdk_chemistry.algorithms.OrbitalLocalizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrbitalLocalizer</span></code></a></p></td>
<td><p>“qdk”</p></td>
<td><p>“pyscf”</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../api/api_autogen/qdk_chemistry.algorithms.html#qdk_chemistry.algorithms.MultiConfigurationCalculator" title="qdk_chemistry.algorithms.MultiConfigurationCalculator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiConfigurationCalculator</span></code></a></p></td>
<td><p>“macis_asci”, “macis_cas”</p></td>
<td><p>“pyscf”</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../api/api_autogen/qdk_chemistry.algorithms.html#qdk_chemistry.algorithms.ActiveSpaceSelector" title="qdk_chemistry.algorithms.ActiveSpaceSelector"><code class="xref py py-class docutils literal notranslate"><span class="pre">ActiveSpaceSelector</span></code></a></p></td>
<td><p>“qdk”, “autocas”</p></td>
<td><p>“pyscf”</p></td>
</tr>
</tbody>
</table>
</section>
<section id="further-reading">
<h2>Further reading<a class="headerlink" href="#further-reading" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Some of the above examples can be downloaded as complete <a class="reference external" href="../../../_static/examples/cpp/interfaces.cpp">C++</a> and <a class="reference external" href="../../../_static/examples/python/interfaces.py">Python</a> scripts.</p></li>
<li><p><a class="reference internal" href="index.html"><span class="doc">Design principles</span></a>: Core architectural principles of QDK/Chemistry</p></li>
<li><p><a class="reference internal" href="factory_pattern.html"><span class="doc">Factory pattern</span></a>: How to extend QDK/Chemistry with new algorithms and interfaces</p></li>
<li><p><a class="reference internal" href="settings.html"><span class="doc">Settings</span></a>: Configuring algorithm behavior consistently across implementations</p></li>
<li><p><a class="reference internal" href="../data/serialization.html"><span class="doc">Serialization</span></a>: Data persistence and conversion in QDK/Chemistry</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="factory_pattern.html" class="btn btn-neutral float-left" title="Factory pattern" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="settings.html" class="btn btn-neutral float-right" title="Settings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Microsoft Corporation. All rights reserved. Licensed under the MIT License.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>